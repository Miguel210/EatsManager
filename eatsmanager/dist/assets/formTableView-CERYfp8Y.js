import{u as $}from"./useQuery-w5Ei2Yfx.js";import{s as D,u as U,a as q,c as F,b as I,d as N}from"./vee-validate-Cs0uyyLT.js";import{d as P,D as k,x as b,u as B,c as L,a as o,n as d,G as z,H as G,I as v,J as h,o as j}from"./index-CozHna6C.js";import{e as u}from"./index-HRYNUPNB.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const H=async t=>{try{const{data:e}=await u.post("/table/get/",{id:t});return console.log(e),{...e.data}}catch(e){throw console.log(e),new Error(`Error getting table by id ${t}`)}},J=async t=>{const e=t.id;return t.id&&t.id!==""?await K(e,t):await Q(t)},K=async(t,e)=>{delete e.id;try{const{data:a}=await u.post("/table/update/",{id:t,table:e});return a}catch(a){throw console.log(a),new Error("Uploading document")}},Q=async t=>{try{const{data:e}=await u.post("/table/create/",{table:t});return e}catch(e){throw console.log(e),new Error("Error creating table")}},R=F({categoryName:I(),isActive:N()}),W=P({components:{InputText:D},props:{tableId:{type:String,requerid:!0}},setup(t){const e=B(),{data:a,isError:l,isLoading:p}=$({queryKey:["tableForm",t.tableId],queryFn:()=>H(t.tableId)}),{isPending:c,isSuccess:s,data:f,mutate:g}=U({mutationFn:J}),{values:y,defineField:n,errors:A,handleSubmit:w,resetForm:m,meta:E}=q({validationSchema:R}),[S,O]=n("description"),[i,C]=n("status"),[M,T]=n("isActive"),V=w(async r=>{g(r)});return k(()=>{if(l.value&&!p.value){e.replace("/producto");return}}),b(a,()=>{a&&m({values:a.value})},{deep:!0,immediate:!0}),b(s,r=>{console.log("isUpdateSuccess"),r&&m({values:f.value})}),{values:y,errors:A,meta:E,isPending:c,table:a,description:S,descriptionAttrs:O,status:i,statusAttrs:C,isActive:M,isActiveAttrs:T,statusModiefied:()=>i.value==="Ocupada"||i.value==="Esperando Orden"||i.value==="Orden Tomada"||i.value==="Combinada",onSubmit:V}}}),X={class:"flex items-center gap-4 mb-4"},Y={class:"flex items-center gap-4 mb-4"},Z=["disabled"],_={class:"flex items-center gap-4 mb-4"},ee=["model"],te={class:"flex justify-end gap-2"},oe=["disabled"];function ae(t,e,a,l,p,c){return j(),L("div",null,[o("form",{onSubmit:e[3]||(e[3]=(...s)=>t.onSubmit&&t.onSubmit(...s))},[e[9]||(e[9]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),o("div",X,[e[4]||(e[4]=o("label",{for:"description",class:"font-semibold w-24"},"Nombre de la Mesa",-1)),d(o("input",G({"onUpdate:modelValue":e[0]||(e[0]=s=>t.description=s)},t.descriptionAttrs,{required:""}),null,16),[[z,t.description]])]),o("div",Y,[e[6]||(e[6]=o("label",{for:"status",class:"font-semibold w-24"},"Estatus",-1)),d(o("select",{name:"status",id:"status","onUpdate:modelValue":e[1]||(e[1]=s=>t.status=s),requerid:"",disabled:t.statusModiefied()},e[5]||(e[5]=[h('<option value="Disponible/Vacia">Disponible/Vac√≠a</option><option value="Esperando Cuenta">Esperando Cuenta</option><option value="Cuenta Pagada">Cuenta Pagada</option><option value="En Limpieza">En Limpieza</option><option value="Ocupada" disabled>Ocupada</option><option value="Esperando Orden" disabled>Esperando Orden</option><option value="Orden Tomada" disabled>Orden Tomada</option><option value="Combinada" disabled>Combinada</option><option value="En Mantenimiento">En Mantenimiento</option><option value="No Disponible">No Disponible</option>',10)]),8,Z),[[v,t.status]])]),o("div",_,[e[8]||(e[8]=o("label",{for:"isActive",class:"font-semibold w-24"},"Esta Activa?",-1)),d(o("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[2]||(e[2]=s=>t.isActive=s),model:t.isActive,required:""},e[7]||(e[7]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,ee),[[v,t.isActive]])]),o("div",te,[o("button",{type:"submit",disabled:t.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,oe)])],32)])}const le=x(W,[["render",ae]]);export{le as default};
