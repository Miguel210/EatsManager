import{u as C}from"./useQuery-w5Ei2Yfx.js";import{s as F,u as U,a as h,c as q,b as I,d as V}from"./vee-validate-Cs0uyyLT.js";import{d as k,D,x as m,u as x,c as B,a as o,n as p,G as M,H as P,I as j,j as G,t as T,o as H}from"./index-CozHna6C.js";import{e as i}from"./index-HRYNUPNB.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const L=async t=>{const e=t.id;return t.id&&t.id!==""?await Q(e,t):await R(t)},Q=async(t,e)=>{delete e.id;try{const{data:r}=await i.post("/category/update/",{id:t,category:e});return r}catch(r){throw console.log(r),new Error("Uploading document")}},R=async t=>{try{const{data:e}=await i.post("/category/create/",{category:t});return e}catch(e){throw console.log(e),new Error("Error creating category")}},z=async t=>{if(t==="create")return{};try{const{data:e}=await i.post("/category/get/",{id:t});return console.log(e),{...e.data}}catch(e){throw console.log(e),new Error(`Error getting category by id ${t}`)}},J=q({categoryName:I(),isActive:V()}),O=k({components:{InputText:F},props:{categoryId:{type:String,requerid:!0}},setup(t){const e=x(),{data:r,isError:n,isLoading:c}=C({queryKey:["categoryForm",t.categoryId],queryFn:()=>z(t.categoryId)}),{isPending:d,isSuccess:a,data:g,mutate:y}=U({mutationFn:L}),{values:f,defineField:u,errors:v,handleSubmit:b,resetForm:l,meta:w}=h({validationSchema:J}),[A,S]=u("categoryName"),[N,E]=u("isActive"),$=b(async s=>{y(s)});return D(()=>{if(n.value&&!c.value){e.replace("/producto");return}}),m(r,()=>{r&&l({values:r.value})},{deep:!0,immediate:!0}),m(a,s=>{console.log("isUpdateSuccess"),s&&l({values:g.value})}),{values:f,errors:v,meta:w,isPending:d,category:r,categoryName:A,categoryNameAttrs:S,isActive:N,isActiveAttrs:E,onSubmit:$}}}),W={class:"flex items-center gap-4 mb-4"},X={class:"flex items-center gap-4 mb-4"},Y=["model"],Z={class:"flex justify-end gap-2"},_=["disabled"];function ee(t,e,r,n,c,d){return H(),B("div",null,[o("form",{onSubmit:e[2]||(e[2]=(...a)=>t.onSubmit&&t.onSubmit(...a))},[e[6]||(e[6]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),o("div",W,[e[3]||(e[3]=o("label",{for:"description",class:"font-semibold w-24"},"Nombre de la categoria",-1)),p(o("input",P({"onUpdate:modelValue":e[0]||(e[0]=a=>t.categoryName=a)},t.categoryNameAttrs,{required:""}),null,16),[[M,t.categoryName]])]),o("div",X,[e[5]||(e[5]=o("label",{for:"isActive",class:"font-semibold w-24"},"Estatus",-1)),p(o("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[1]||(e[1]=a=>t.isActive=a),model:t.isActive,required:""},e[4]||(e[4]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,Y),[[j,t.isActive]])]),o("div",Z,[o("button",{type:"submit",disabled:t.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,_)])],32),G(" "+T(t.category),1)])}const ne=K(O,[["render",ee]]);export{ne as default};
