import{u as y}from"./useQuery-w5Ei2Yfx.js";import{s as h,u as _,a as ee,c as te,b as c,f as T,d as M}from"./vee-validate-Cs0uyyLT.js";import{d as oe,D as se,x as q,u as re,c as d,a as o,n,G as S,H as a,v as U,I as m,F as E,g as F,o as u,t as I}from"./index-CozHna6C.js";import{e as f}from"./index-HRYNUPNB.js";import{a as ie,g as ne}from"./get-productTipes.action-BztCa42A.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const de=async t=>{if(t==="create")return{};try{const{data:e}=await f.post("/product/get/",{id:t});return console.log(e),{...e.data}}catch(e){throw console.log(e),new Error(`Error getting product by id ${t}`)}},ue=async t=>{const e=t.id;return t.id&&t.id!==""?await le(e,t):await pe(t)},le=async(t,e)=>{delete e.id;try{const{data:r}=await f.post("/product/update/",{id:t,product:e});return r}catch(r){throw console.log(r),new Error("Uploading product")}},pe=async t=>{try{const{data:e}=await f.post("/product/create/",{product:t});return e}catch(e){throw console.log(e),new Error("Error creating product")}},ce=te({description:c(),code:c(),existence:T(),price:T(),productTypeId:c(),categoryId:c(),viewMenu:M(),isActive:M()}),me=oe({components:{InputText:h},props:{productId:{type:String,requerid:!0}},setup(t){const e=re(),{data:r,isError:g,isLoading:b}=y({queryKey:["productForm",t.productId],queryFn:()=>de(t.productId)}),{isPending:w,isSuccess:l,data:p,mutate:s}=_({mutationFn:ue}),{values:V,defineField:i,errors:$,handleSubmit:D,resetForm:A,meta:P}=ee({validationSchema:ce}),{data:k}=y({queryKey:["productType"],queryFn:()=>ie()}),{data:C}=y({queryKey:["category"],queryFn:()=>ne()}),[B,K]=i("description"),[N,G]=i("code"),[L,j]=i("existence"),[H,Q]=i("price"),[R,z]=i("productTypeId"),[J,O]=i("categoryId"),[W,X]=i("isActive"),[Y,Z]=i("viewMenu"),x=D(async v=>{s(v)});return se(()=>{if(g.value&&!b.value){e.replace("/producto");return}}),q(r,()=>{r&&A({values:r.value})},{deep:!0,immediate:!0}),q(l,v=>{console.log("isUpdateSuccess"),v&&A({values:p.value})}),{values:V,errors:$,meta:P,isPending:w,categoryData:C,productTypeData:k,description:B,descriptionAttrs:K,code:N,codeAttrs:G,existence:L,existenceAttrs:j,price:H,priceAttrs:Q,productType:R,productTypeAttrs:z,category:J,categoryAttrs:O,viewMenu:Y,viewMenuAttrs:Z,isActive:W,isActiveAttrs:X,onSubmit:x}}}),ve={class:"flex items-center gap-4 mb-4"},ye={class:"flex items-center gap-4 mb-4"},fe={class:"flex items-center gap-4 mb-4"},ge={class:"flex items-center gap-4 mb-4"},be={class:"flex items-center gap-4 mb-4"},we=["model"],Ae=["value"],Te={class:"flex items-center gap-4 mb-4"},Me=["model"],qe=["value"],Se={class:"flex items-center gap-4 mb-4"},Ue=["model"],Ee={class:"flex items-center gap-4 mb-4"},Fe=["model"],Ie={class:"flex justify-end gap-2"},Ve=["disabled"];function $e(t,e,r,g,b,w){var l,p;return u(),d("div",null,[o("form",{onSubmit:e[8]||(e[8]=(...s)=>t.onSubmit&&t.onSubmit(...s))},[e[19]||(e[19]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),o("div",ve,[e[9]||(e[9]=o("label",{for:"description",class:"font-semibold w-24"},"Nombre del producto",-1)),n(o("input",a({"onUpdate:modelValue":e[0]||(e[0]=s=>t.description=s)},t.descriptionAttrs,{required:""}),null,16),[[S,t.description]])]),o("div",ye,[e[10]||(e[10]=o("label",{for:"code",class:"font-semibold w-24"},"Codigo",-1)),n(o("input",a({"onUpdate:modelValue":e[1]||(e[1]=s=>t.code=s)},t.codeAttrs,{required:""}),null,16),[[S,t.code]])]),o("div",fe,[e[11]||(e[11]=o("label",{for:"existence",class:"font-semibold w-24"},"Existencia",-1)),n(o("input",a({type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>t.existence=s)},t.existenceAttrs,{required:""}),null,16),[[U,t.existence]])]),o("div",ge,[e[12]||(e[12]=o("label",{for:"price",class:"font-semibold w-24"},"Precio",-1)),n(o("input",a({type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>t.price=s)},t.priceAttrs,{required:""}),null,16),[[U,t.price]])]),o("div",be,[e[13]||(e[13]=o("label",{for:"productType",class:"font-semibold w-24"},"Tipo de Producto",-1)),n(o("select",a({name:"productType",id:"productType","onUpdate:modelValue":e[4]||(e[4]=s=>t.productType=s),model:t.productType},t.productTypeAttrs),[(u(!0),d(E,null,F((l=t.productTypeData)==null?void 0:l.data,s=>(u(),d("option",{key:s.id,value:s.id},I(s.description),9,Ae))),128))],16,we),[[m,t.productType]])]),o("div",Te,[e[14]||(e[14]=o("label",{for:"category",class:"font-semibold w-24"},"Categoria",-1)),n(o("select",a({name:"category",id:"category","onUpdate:modelValue":e[5]||(e[5]=s=>t.category=s),model:t.category},t.categoryAttrs),[(u(!0),d(E,null,F((p=t.categoryData)==null?void 0:p.data,s=>(u(),d("option",{key:s.id,value:s.id},I(s.categoryName),9,qe))),128))],16,Me),[[m,t.category]])]),o("div",Se,[e[16]||(e[16]=o("label",{for:"viewMenu",class:"font-semibold w-24"},"Es menu?",-1)),n(o("select",a({name:"viewMenu",id:"viewMenu","onUpdate:modelValue":e[6]||(e[6]=s=>t.viewMenu=s),model:t.viewMenu},t.viewMenuAttrs,{required:""}),e[15]||(e[15]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),16,Ue),[[m,t.viewMenu]])]),o("div",Ee,[e[18]||(e[18]=o("label",{for:"isActive",class:"font-semibold w-24"},"Estatus",-1)),n(o("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[7]||(e[7]=s=>t.isActive=s),model:t.isActive,required:""},e[17]||(e[17]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,Fe),[[m,t.isActive]])]),o("div",Ie,[o("button",{type:"submit",disabled:t.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,Ve)])],32)])}const Ge=ae(me,[["render",$e]]);export{Ge as default};
