import{d as D,D as G,x as b,u as C,c as N,a as t,n as i,G as T,H as j,I as l,o as H}from"./index-CozHna6C.js";import{u as K}from"./useQuery-w5Ei2Yfx.js";import{s as L,u as O,a as Q,c as R,b as a}from"./vee-validate-Cs0uyyLT.js";import{e as p}from"./index-HRYNUPNB.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const J=async o=>{if(o==="create")return{};try{const{data:e}=await p.post("/supplier/Proveedor/getSupplier/",{id:o});return{...e.data}}catch(e){throw console.log(e),new Error(`Error getting supplier by id ${o}`)}},W=async o=>{const e=o.id;return o.id&&o.id!==""?await X(e,o):await Y(o)},X=async(o,e)=>{delete e.id;try{const{data:s}=await p.post("/supplier/Proveedor/update",{id:o,supplier:e});return s}catch(s){throw console.log(s),new Error("uploading Supplier")}},Y=async o=>{try{const{data:e}=await p.post("/supplier/Proveedor/",o);return e}catch(e){throw console.log(e),new Error("Error creating Supplier")}},Z=R({fullname:a(),genderId:a(),profileId:a(),typePersonId:a(),isActive:a()}),x=D({components:{InputText:L},props:{supplierId:{type:String,required:!0}},setup(o){const e=C(),{data:s,isError:u,isLoading:m}=K({queryKey:["supplier",o.supplierId],queryFn:()=>J(o.supplierId),retry:!1}),{isPending:f,isSuccess:r,data:v,mutate:g}=O({mutationFn:W}),{values:y,defineField:n,errors:w,handleSubmit:A,resetForm:c,meta:S}=Q({validationSchema:Z}),[P,I]=n("person.fullname"),[E,U]=n("person.genderId"),[q,$]=n("person.profileId"),[F,V]=n("person.typePersonId"),[k,B]=n("isActive"),M=A(async d=>{g(d)});return G(()=>{if(u.value&&!m.value){e.replace("/proveedor");return}}),b(s,()=>{s&&c({values:s.value})},{deep:!0,immediate:!0}),b(r,d=>{console.log("isUpdateSuccess"),d&&c({values:v.value})}),{values:y,errors:w,meta:S,isPending:f,isActive:k,isActiveAttrs:B,gender:E,genderAttrs:U,profile:q,profileAttrs:$,typePerson:F,typePersonAttrs:V,fullname:P,fullnameAttrs:I,onSubmit:M}}}),h={class:"card bg-white"},_={class:"flex items-center gap-4 mb-4"},ee={class:"flex items-center gap-4 mb-4"},oe=["model"],te={class:"flex items-center gap-4 mb-4"},re=["model"],se={class:"flex items-center gap-4 mb-4"},ne=["model"],ie={class:"flex items-center gap-4 mb-4"},ae=["model"],le={class:"flex justify-end gap-2"},de=["disabled"];function pe(o,e,s,u,m,f){return H(),N("div",h,[t("form",{onSubmit:e[5]||(e[5]=(...r)=>o.onSubmit&&o.onSubmit(...r))},[e[15]||(e[15]=t("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),t("div",_,[e[6]||(e[6]=t("label",{for:"fullname",class:"font-semibold w-24"},"Nombre Completo",-1)),i(t("input",j({"onUpdate:modelValue":e[0]||(e[0]=r=>o.fullname=r)},o.fullnameAttrs,{required:""}),null,16),[[T,o.fullname]])]),t("div",ee,[e[8]||(e[8]=t("label",{for:"gender",class:"font-semibold w-24"},"Genero",-1)),i(t("select",{name:"genderId",id:"genderId","onUpdate:modelValue":e[1]||(e[1]=r=>o.gender=r),model:o.gender,required:""},e[7]||(e[7]=[t("option",{value:"f83dac87-cae3-433e-909f-89b7cb865ff1"},"Masculino",-1),t("option",{value:"2ffbc2df-7f6f-4c7a-bf4c-88eee010644f"},"Femenino",-1),t("option",{value:"a674eeeb-cd0f-4794-a35b-e321b33344a0"},"Otro",-1)]),8,oe),[[l,o.gender]])]),t("div",te,[e[10]||(e[10]=t("label",{for:"profile",class:"font-semibold w-24"},"Perfil",-1)),i(t("select",{name:"perfil",id:"perfil","onUpdate:modelValue":e[2]||(e[2]=r=>o.profile=r),model:o.profile,required:""},e[9]||(e[9]=[t("option",{value:"0402cc9c-0992-4ad8-ab70-142522d2815f"},"Proveedor",-1)]),8,re),[[l,o.profile]])]),t("div",se,[e[12]||(e[12]=t("label",{for:"typeperson",class:"font-semibold w-24"},"Tipo de Persona",-1)),i(t("select",{name:"typeperson",id:"typeperson","onUpdate:modelValue":e[3]||(e[3]=r=>o.typePerson=r),model:o.typePerson,required:""},e[11]||(e[11]=[t("option",{value:"682155b3-a3da-43ec-845d-024a1e0b8a70"},"Proveedor",-1)]),8,ne),[[l,o.typePerson]])]),t("div",ie,[e[14]||(e[14]=t("label",{for:"isActive",class:"font-semibold w-24"},"Estatus",-1)),i(t("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[4]||(e[4]=r=>o.isActive=r),model:o.isActive,required:""},e[13]||(e[13]=[t("option",{value:!0},"Activo",-1),t("option",{value:!1},"Inactivo",-1)]),8,ae),[[l,o.isActive]])]),t("div",le,[t("button",{type:"submit",disabled:o.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,de)])],32)])}const ge=z(x,[["render",pe]]);export{ge as default};
