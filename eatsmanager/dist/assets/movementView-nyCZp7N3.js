import{s as g,a as M,b as y,c as V,d as U}from"./index-Bx1KvYza.js";import{a as A,_ as b}from"./DataTableBsic.vue_vue_type_style_index_0_lang-RuosC7ZF.js";import{u as w}from"./useQuery-w5Ei2Yfx.js";import{g as B}from"./get-movements.action-Da-TsWoS.js";import{e as h}from"./index-HRYNUPNB.js";import{g as I}from"./jsPdf.config-xav44hqu.js";import{s as T}from"./index-Cesmw0zz.js";import{d as v,h as $,i as D,o as i,c as s,e,F as E,a as C,b as a,j as c,t as k,f as R,w as u}from"./index-CozHna6C.js";import"./index-Dud2RmUp.js";import"./index-DNJpqbx1.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BZ9jZdO6.js";import"./index-3DMY36XO.js";import"./index-umGsnqLm.js";const S=async()=>{try{const{data:o}=await h.get("/document/");return{...o}}catch(o){throw console.log(o),new Error("Error getter data")}},K=async o=>{if(o)try{await h.post("/document/delete/",{id:o})}catch(n){throw console.log(n),new Error(`Error deleting document by id ${o}`)}},L={key:0},N={key:1},j={class:"flex flex-row-reverse"},P=v({__name:"movementMenuView",setup(o){const{data:n,isLoading:r,isError:m}=w({queryKey:["movement"],queryFn:()=>B(!1)}),d=$([]),p=D(()=>{var l;return(l=n.value)!=null&&l.data&&n.value.data.length>0&&(d.value=n.value.data.map(t=>{var x;const _=String(t.date),[q]=_.split("T"),F=q.split(".")[0];return{id:t.id,document:t.documentId.description,folio:t.documentId.folio,date:F.toString(),elaborate:(x=t.elaborateId)==null?void 0:x.person.fullname,person:t.personId.fullname,amount:t.amount,status:t.status,isActive:t.isActive}})),[]}),f=[{data:"document",title:"Documento"},{data:"folio",title:"folio"},{data:"date",title:"Fecha"},{data:"elaborate",title:"Elaborado"},{data:"person",title:"Cliente"},{data:"amount",title:"Cantidad"},{data:"isActive",title:"Estatus"}];return(l,t)=>(i(),s("div",null,[e(r)?(i(),s("p",L,"Cargando datos...")):e(m)?(i(),s("p",N,"Error al cargar los datos")):(i(),s(E,{key:2},[C("div",j,[a(A,{"type-button":"success","label-data":"Compra","icon-button":"pi pi-truck","is-toast":!1}),a(A,{"type-button":"success","label-data":"Venta","icon-button":"pi pi-shopping-cart","is-toast":!1}),a(e(T),{severity:"danger",rounded:"",label:"Reporte",icon:"pi pi-file-pdf",onClick:t[0]||(t[0]=_=>e(I)(d.value,`Reporte-Movimientos-${new Date}`,"landscape"))})]),a(b,{"is-add":!1,"is-delete":!1,"is-update":!1,columns:f,data:d.value,"table-width":"full",search:!0,pagination:!0},null,8,["data"]),c(" "+k(p.value),1)],64))]))}}),Q=async()=>{try{const{data:o}=await h.get("/movementDetail/");return console.log(o),{...o}}catch(o){throw console.log(o),new Error("Error getting data")}},z={key:0},G={key:1},H=v({__name:"movementDetailMenuView",setup(o){const{data:n,isLoading:r,isError:m}=w({queryKey:["movementDt"],queryFn:()=>Q()}),d=$([]),p=D(()=>{var l;return(l=n.value)!=null&&l.data&&n.value.data.length>0&&(d.value=n.value.data.map(t=>({document:t.movementId.document.description,folio:t.movementId.document.folio,quantity:t.quantity,productId:t.productId.description,priceUnit:t.priceUnit,subTotal:t.subTotal,tax:t.tax,total:t.total,costUnit:t.costUnit,isActive:t.isActive}))),[]}),f=[{data:"document",title:"Documento"},{data:"folio",title:"Folio"},{data:"quantity",title:"cantidad"},{data:"productId",title:"preoducto"},{data:"priceUnit",title:"precio unitario"},{data:"subTotal",title:"SubTotal"},{data:"tax",title:"Taxas"},{data:"total",title:"total"},{data:"costUnit",title:"consto unitario"},{data:"isActive",title:"Estatus"}];return(l,t)=>(i(),s("div",null,[e(r)?(i(),s("p",z,"Cargando datos...")):e(m)?(i(),s("p",G,"Error al cargar los datos")):(i(),s(E,{key:2},[C("div",null,[a(e(T),{severity:"danger",rounded:"",label:"Reporte",icon:"pi pi-file-pdf",onClick:t[0]||(t[0]=_=>e(I)(d.value,`Reporte-Movimientos-Detalle-${new Date}`))})]),a(b,{"is-add":!1,"is-delete":!1,"is-update":!1,columns:f,data:d.value,"table-width":"full",search:!0,pagination:!0},null,8,["data"]),c(" "+k(p.value),1)],64))]))}}),J={key:0},O={key:1},W=v({__name:"documentMenuView",setup(o){const{data:n,isLoading:r,isError:m}=w({queryKey:["document"],queryFn:()=>S()}),d=$([]),p=D(()=>{var l;return(l=n.value)!=null&&l.data&&n.value.data.length>0&&(d.value=n.value.data.map(t=>({id:t.id,description:t.description,folio:t.folio,isActive:t.isActive}))),[]}),f=[{data:"description",title:"Documento"},{data:"folio",title:"Folio"},{data:"isActive",title:"Estatus"}];return(l,t)=>(i(),s("div",null,[e(r)?(i(),s("p",J,"Cargando datos...")):e(m)?(i(),s("p",O,"Error al cargar los datos")):(i(),s(E,{key:2},[a(b,{"is-add":!0,"router-link":"/movimiento/documentos/","is-delete":!0,functionDelete:e(K),"is-update":!0,columns:f,data:d.value,"table-width":"full",search:!0,pagination:!0},null,8,["functionDelete","data"]),c(" "+k(p.value),1)],64))]))}}),ct=v({__name:"movementView",setup(o){return(n,r)=>(i(),R(e(U),{value:"0"},{default:u(()=>[a(e(M),null,{default:u(()=>[a(e(g),{value:"0"},{default:u(()=>r[0]||(r[0]=[c("Movimientos")])),_:1}),a(e(g),{value:"1"},{default:u(()=>r[1]||(r[1]=[c("Documentos")])),_:1}),a(e(g),{value:"2"},{default:u(()=>r[2]||(r[2]=[c("Detalles")])),_:1})]),_:1}),a(e(V),null,{default:u(()=>[a(e(y),{value:"0"},{default:u(()=>[a(P)]),_:1}),a(e(y),{value:"1"},{default:u(()=>[a(W)]),_:1}),a(e(y),{value:"2"},{default:u(()=>[a(H)]),_:1})]),_:1})]),_:1}))}});export{ct as default};
