import{u as I}from"./useQuery-w5Ei2Yfx.js";import{s as P,u as V,a as B,c as D,b as M,d as m}from"./vee-validate-Cs0uyyLT.js";import{d as G,D as N,x as f,u as h,c as j,a as o,n,G as x,H as C,I as v,o as H}from"./index-CozHna6C.js";import{e as d}from"./index-HRYNUPNB.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const L=async t=>{const e=t.id;return t.id&&t.id!==""?await Q(e,t):await R(t)},Q=async(t,e)=>{delete e.id;try{const{data:r}=await d.post("/producttype/update/",{id:t,productType:e});return r}catch(r){throw console.log(r),new Error("Uploading productType")}},R=async t=>{try{const{data:e}=await d.post("/productType/create/",{productType:t});return e}catch(e){throw console.log(e),new Error("Error creating productType")}},z=async t=>{if(t==="create")return{};try{const{data:e}=await d.post("/producttype/get/",{id:t});return console.log(e),{...e.data}}catch(e){throw console.log(e),new Error(`Error getting productType by id ${t}`)}},J=D({description:M(),useStock:m(),isActive:m()}),O=G({components:{InputText:P},props:{productTypeId:{type:String,requerid:!0}},setup(t){const e=h(),{data:r,isError:u,isLoading:c}=I({queryKey:["productTypeForm",t.productTypeId],queryFn:()=>z(t.productTypeId)}),{isPending:l,isSuccess:s,data:b,mutate:y}=V({mutationFn:L}),{values:g,defineField:i,errors:S,handleSubmit:A,resetForm:p,meta:w}=B({validationSchema:J}),[k,T]=i("description"),[E,U]=i("useStock"),[$,F]=i("isActive"),q=A(async a=>{y(a)});return N(()=>{if(u.value&&!c.value){e.replace("/producto");return}}),f(r,()=>{r&&p({values:r.value})},{deep:!0,immediate:!0}),f(s,a=>{console.log("isUpdateSuccess"),a&&p({values:b.value})}),{values:g,errors:S,meta:w,isPending:l,description:k,descriptionAttrs:T,useStock:E,useStockAttrs:U,isActive:$,isActiveAttrs:F,onSubmit:q}}}),W={class:"flex items-center gap-4 mb-4"},X={class:"flex items-center gap-4 mb-4"},Y=["model"],Z={class:"flex items-center gap-4 mb-4"},_=["model"],ee={class:"flex justify-end gap-2"},te=["disabled"];function oe(t,e,r,u,c,l){return H(),j("div",null,[o("form",{onSubmit:e[3]||(e[3]=(...s)=>t.onSubmit&&t.onSubmit(...s))},[e[9]||(e[9]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),o("div",W,[e[4]||(e[4]=o("label",{for:"description",class:"font-semibold w-24"},"Nombre del tipo de producto",-1)),n(o("input",C({"onUpdate:modelValue":e[0]||(e[0]=s=>t.description=s)},t.descriptionAttrs,{required:""}),null,16),[[x,t.description]])]),o("div",X,[e[6]||(e[6]=o("label",{for:"useStock",class:"font-semibold w-24"},"Usa stock?",-1)),n(o("select",{name:"useStock",id:"useStock","onUpdate:modelValue":e[1]||(e[1]=s=>t.useStock=s),model:t.useStock,required:""},e[5]||(e[5]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,Y),[[v,t.useStock]])]),o("div",Z,[e[8]||(e[8]=o("label",{for:"isActive",class:"font-semibold w-24"},"Estatus",-1)),n(o("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[2]||(e[2]=s=>t.isActive=s),model:t.isActive,required:""},e[7]||(e[7]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,_),[[v,t.isActive]])]),o("div",ee,[o("button",{type:"submit",disabled:t.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,te)])],32)])}const ue=K(O,[["render",oe]]);export{ue as default};
