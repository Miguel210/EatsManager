import{d as Q,D as R,x as c,u as z,c as W,a as o,n as a,G as X,H as Y,I as i,v as p,t as u,o as Z}from"./index-CozHna6C.js";import{u as x}from"./useQuery-w5Ei2Yfx.js";import{s as h,u as _,a as ee,c as te,b as l,e as v}from"./vee-validate-Cs0uyyLT.js";import{e as m}from"./index-HRYNUPNB.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const se=async t=>{if(t==="create")return{};try{const{data:e}=await m.post("/employee/get/",{id:t});return{...e.data}}catch(e){throw console.log(e),new Error(`Error getting employee by id ${t}`)}},re=async t=>{const e=t.id;return t.id&&t.id!==""?await ne(e,t):await ae(t)},ne=async(t,e)=>{delete e.id;try{const{data:n}=await m.post("/employee/update/",{id:t,employee:e});return n}catch(n){throw console.log(n),new Error("uploading employee")}},ae=async t=>{try{const{data:e}=await m.post("/employee/create/",t);return e}catch(e){throw console.log(e),new Error("Error creating employee")}},le=te({fullname:l(),genderId:l(),profileId:l(),typePersonId:l(),isActive:l(),salary:l(),input:v(),output:v()}),ie=Q({components:{InputText:h},props:{employeeId:{type:String,required:!0}},setup(t){const e=z(),{data:n,isError:f,isLoading:b}=x({queryKey:["employee",t.employeeId],queryFn:()=>se(t.employeeId),retry:!1}),{isPending:y,isSuccess:s,data:w,mutate:A}=_({mutationFn:re}),{values:E,defineField:r,errors:S,resetForm:g,handleSubmit:I,meta:P}=ee({validationSchema:le}),[U,V]=r("person.fullname"),[q,$]=r("person.genderId"),[D,F]=r("person.profileId"),[M,N]=r("person.typePersonId"),[k,B]=r("isActive"),[O,j]=r("hireDate"),[G,J]=r("input"),[T,C]=r("output"),[H,K]=r("salary"),L=I(async d=>{A(d)});return R(()=>{if(f.value&&!b.value){e.replace("/empleado");return}}),c(n,()=>{n&&g({values:n.value})},{deep:!0,immediate:!0}),c(s,d=>{console.log("isUpdateSuccess"),d&&g({values:w.value})}),{values:E,errors:S,meta:P,isPending:y,isActive:k,isActiveAttrs:B,gender:q,genderAttrs:$,profile:D,profileAttrs:F,typePerson:M,typePersonAttrs:N,fullname:U,fullnameAttrs:V,hireDate:O,hireDateAttrs:j,input:G,inputAttrs:J,output:T,outputAttrs:C,salary:H,salaryAttrs:K,onSubmit:L}}}),de={class:"flex items-center gap-4 mb-4"},pe={class:"flex items-center gap-4 mb-4"},ue=["model"],me={class:"flex items-center gap-4 mb-4"},fe=["model"],be={class:"flex items-center gap-4 mb-4"},ye=["model"],ge={class:"flex items-center gap-4 mb-4"},ce=["model"],ve={class:"flex items-center gap-4 mb-4"},we={class:"flex items-center gap-4 mb-4"},Ae={class:"flex items-center gap-4 mb-4"},Ee={class:"flex justify-end gap-2"},Se=["disabled"],Ie={class:"grid grid-cols-2"},Pe={class:"bg-blue-200"},Ue={class:"bg-red-200"},Ve={class:"bg-green-200 col-span-2"};function qe(t,e,n,f,b,y){return Z(),W("div",null,[o("form",{onSubmit:e[8]||(e[8]=(...s)=>t.onSubmit&&t.onSubmit(...s))},[e[21]||(e[21]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),o("div",de,[e[9]||(e[9]=o("label",{for:"fullname",class:"font-semibold w-24"},"Nombre Completo",-1)),a(o("input",Y({"onUpdate:modelValue":e[0]||(e[0]=s=>t.fullname=s)},t.fullnameAttrs,{required:""}),null,16),[[X,t.fullname]])]),o("div",pe,[e[11]||(e[11]=o("label",{for:"gender",class:"font-semibold w-24"},"Genero",-1)),a(o("select",{name:"genderId",id:"genderId","onUpdate:modelValue":e[1]||(e[1]=s=>t.gender=s),model:t.gender,required:""},e[10]||(e[10]=[o("option",{value:"f83dac87-cae3-433e-909f-89b7cb865ff1"},"Masculino",-1),o("option",{value:"2ffbc2df-7f6f-4c7a-bf4c-88eee010644f"},"Femenino",-1),o("option",{value:"a674eeeb-cd0f-4794-a35b-e321b33344a0"},"Otro",-1)]),8,ue),[[i,t.gender]])]),o("div",me,[e[13]||(e[13]=o("label",{for:"profile",class:"font-semibold w-24"},"Perfil",-1)),a(o("select",{name:"perfil",id:"perfil","onUpdate:modelValue":e[2]||(e[2]=s=>t.profile=s),model:t.profile,required:""},e[12]||(e[12]=[o("option",{value:"14588c57-ee54-4c01-bc7f-8c445e643ee5"},"Empleado",-1)]),8,fe),[[i,t.profile]])]),o("div",be,[e[15]||(e[15]=o("label",{for:"typeperson",class:"font-semibold w-24"},"Tipo de Persona",-1)),a(o("select",{name:"typeperson",id:"typeperson","onUpdate:modelValue":e[3]||(e[3]=s=>t.typePerson=s),model:t.typePerson,required:""},e[14]||(e[14]=[o("option",{value:"6cb4ec14-8564-4d6f-80c8-eeaacbfe88a4"},"Empleado",-1)]),8,ye),[[i,t.typePerson]])]),o("div",ge,[e[17]||(e[17]=o("label",{for:"isActive",class:"font-semibold w-24"},"Estatus",-1)),a(o("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[4]||(e[4]=s=>t.isActive=s),model:t.isActive,required:""},e[16]||(e[16]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,ce),[[i,t.isActive]])]),o("div",ve,[e[18]||(e[18]=o("label",{for:"Entrada",class:"font-semibold w-24"},"Entrada",-1)),a(o("input",{type:"date",name:"Entrada de trabajo",id:"input","onUpdate:modelValue":e[5]||(e[5]=s=>t.input=s)},null,512),[[p,t.input]])]),o("div",we,[e[19]||(e[19]=o("label",{for:"Salida",class:"font-semibold w-24"},"Salida",-1)),a(o("input",{type:"date",name:"salida de trabajo",id:"output","onUpdate:modelValue":e[6]||(e[6]=s=>t.output=s)},null,512),[[p,t.output]])]),o("div",Ae,[e[20]||(e[20]=o("label",{for:"Salario",class:"font-semibold w-24"},"Salario",-1)),a(o("input",{type:"number",name:"salario",id:"salary","onUpdate:modelValue":e[7]||(e[7]=s=>t.salary=s)},null,512),[[p,t.salary]])]),o("div",Ee,[o("button",{type:"submit",disabled:t.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,Se)])],32),o("div",Ie,[o("pre",Pe,"                "+u(JSON.stringify(t.values,null,2))+`
            `,1),o("pre",Ue,"                "+u(JSON.stringify(t.errors,null,2))+`
            `,1),o("pre",Ve,"                "+u(JSON.stringify(t.meta,null,2))+`
            `,1)])])}const Be=oe(ie,[["render",qe]]);export{Be as default};
