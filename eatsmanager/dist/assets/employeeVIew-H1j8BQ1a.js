import{s as h,a as I,b as w,c as q,d as C}from"./index-Bx1KvYza.js";import{_ as k}from"./DataTableBsic.vue_vue_type_style_index_0_lang-RuosC7ZF.js";import{u as $}from"./useQuery-w5Ei2Yfx.js";import{e as T}from"./index-HRYNUPNB.js";import{g as L}from"./get-employees.actions-BDlQVtjG.js";import{d as E,h as b,i as S,o as l,c as s,e,F as A,b as r,j as p,t as F,f as B,w as d}from"./index-CozHna6C.js";import{g as V}from"./jsPdf.config-xav44hqu.js";import{s as K}from"./index-Cesmw0zz.js";import"./index-Dud2RmUp.js";import"./index-DNJpqbx1.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BZ9jZdO6.js";import"./index-3DMY36XO.js";import"./index-umGsnqLm.js";const M=async a=>{if(a)try{await T.post("/employee/delete",{id:a})}catch(o){throw console.log(o),new Error(`Error deleting employee by id ${a}`)}},N={key:0},O={key:1},P=E({__name:"employeeMenu",setup(a){const{data:o,isLoading:n,isError:m}=$({queryKey:["employee"],queryFn:()=>L()}),u=b([]),f=S(()=>{var i;return console.log(o),(i=o.value)!=null&&i.data&&o.value.data.length>0&&(u.value=o.value.data.map(t=>{const c=String(t.output),y=String(t.input),[_]=y.split("T"),v=_.split(".")[0],[D]=c.split("T"),x=D.split(".")[0];return{id:t.id,fullname:t.person.fullname,profile:t.person.profile.name,salary:t.salary,input:v.toString(),hireDate:x.toString(),isActive:t.isActive}})),[]}),g=[{data:"fullname",title:"Nombre"},{data:"profile",title:"Perfil"},{data:"salary",title:"Salario"},{data:"input",title:"Entrada"},{data:"hireDate",title:"Fecha de entrada"},{data:"isActive",title:"Estatus"}];return(i,t)=>(l(),s("div",null,[e(n)?(l(),s("p",N,"Cargando datos...")):e(m)?(l(),s("p",O,"Error al cargar los datos")):(l(),s(A,{key:2},[r(k,{"is-add":!0,routerLink:"/empleado/empleados/","is-delete":!0,functionDelete:e(M),"is-update":!0,columns:g,data:u.value,"table-width":"full",search:!0,pagination:!0},null,8,["functionDelete","data"]),p(" "+F(f.value),1)],64))]))}}),R=async()=>{try{const{data:a}=await T.get("/evaluation/");return console.log(a),{...a}}catch(a){throw console.log(a),new Error("Error getting data")}},j={key:0},G={key:1},H=E({__name:"EmployeeEvaluationView",setup(a){const{data:o,isLoading:n,isError:m}=$({queryKey:["evaluation"],queryFn:()=>R()}),u=b([]),f=S(()=>{var i;return(i=o.value)!=null&&i.data&&o.value.data.length>0&&(u.value=o.value.data.map(t=>{const c=String(t.date),[y,_]=c.split("T"),v=_.split(".")[0];return{id:t.id,empoyee:t.empoyee.person.fullname,evaluator:t.evaluator.person.fullname,date:y+" | "+v}})),[]}),g=[{data:"evaluator",title:"Evaluador"},{data:"empoyee",title:"Empleado"},{data:"date",title:"Fecha"}];return(i,t)=>(l(),s("div",null,[e(n)?(l(),s("p",j,"Cargando datos...")):e(m)?(l(),s("p",G,"Error al cargar los datos")):(l(),s(A,{key:2},[r(k,{"is-add":!0,routerLink:"/empleado/evaluaciones/","is-delete":!1,"is-update":!0,columns:g,data:u.value,"table-width":"full",search:!0,pagination:!0},null,8,["data"]),p(" "+F(f.value),1)],64))]))}}),Q=async()=>{try{const{data:a}=await T.get("/attendance/");return console.log(a),{...a}}catch(a){throw console.log(a),new Error("Error getting data")}},z={key:0},J={key:1},U=E({__name:"attendanceMenu",setup(a){const{data:o,isLoading:n,isError:m}=$({queryKey:["attendanceGets"],queryFn:()=>Q()}),u=b([]),f=S(()=>{var i;return(i=o.value)!=null&&i.data&&o.value.data.length>0&&(u.value=o.value.data.map(t=>{const c=String(t.date),[y,_]=c.split("T"),v=_.split(".")[0];return console.log(t),{empoyee:String(t.employeeId.person.fullname),date:y,hour:v,document:String(t.documentId.description)}})),[]}),g=[{data:"empoyee",title:"Empleado"},{data:"date",title:"Fecha"},{data:"hour",title:"Hora"},{data:"document",title:"Documento"}];return(i,t)=>(l(),s("div",null,[e(n)?(l(),s("p",z,"Cargando datos...")):e(m)?(l(),s("p",J,"Error al cargar los datos")):(l(),s(A,{key:2},[r(e(K),{severity:"danger",rounded:"",label:"Reporte",icon:"pi pi-file-pdf",onClick:t[0]||(t[0]=c=>e(V)(u.value,`Reporte-Movimientos-${new Date}`,"landscape"))}),r(k,{"is-add":!0,routerLink:"/empleado/asistencias/","is-delete":!1,"is-update":!1,columns:g,data:u.value,"table-width":"full",search:!0,pagination:!0},null,8,["data"]),p(" "+F(f.value),1)],64))]))}}),dt=E({__name:"employeeVIew",setup(a){return(o,n)=>(l(),B(e(C),{value:"0"},{default:d(()=>[r(e(I),null,{default:d(()=>[r(e(h),{value:"0"},{default:d(()=>n[0]||(n[0]=[p("Empleados")])),_:1}),r(e(h),{value:"1"},{default:d(()=>n[1]||(n[1]=[p("Asistencia")])),_:1}),r(e(h),{value:"2"},{default:d(()=>n[2]||(n[2]=[p("Evaluaciones")])),_:1})]),_:1}),r(e(q),null,{default:d(()=>[r(e(w),{value:"0"},{default:d(()=>[r(P),n[3]||(n[3]=p("> "))]),_:1}),r(e(w),{value:"1"},{default:d(()=>[r(U)]),_:1}),r(e(w),{value:"2"},{default:d(()=>[r(H)]),_:1})]),_:1})]),_:1}))}});export{dt as default};
