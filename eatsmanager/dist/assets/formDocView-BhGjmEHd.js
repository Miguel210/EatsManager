import{u as V}from"./useQuery-w5Ei2Yfx.js";import{s as k,u as B,a as M,c as P,b as h,d as G,f as N}from"./vee-validate-Cs0uyyLT.js";import{d as j,D as x,x as p,u as C,c as H,a as o,n as a,G as f,H as v,I as K,o as L}from"./index-CozHna6C.js";import{e as d}from"./index-HRYNUPNB.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-BosuxZz1.js";const R=async t=>{if(t==="create")return{};try{const{data:e}=await d.post("/document/get/",{id:t});return{...e.data}}catch(e){throw console.log(e),new Error(`Error getting document by id ${t}`)}},T=async t=>{const e=t.id;return t.id&&t.id!==""?await z(e,t):await J(t)},z=async(t,e)=>{delete e.id;try{const{data:i}=await d.post("/document/update/",{id:t,document:e});return i}catch(i){throw console.log(i),new Error("Uploading document")}},J=async t=>{try{const{data:e}=await d.post("/document/create/",{document:t});return e}catch(e){throw console.log(e),new Error("Error creating Document")}},O=P({description:h(),isActive:G(),folio:N()}),W=j({components:{InputText:k},props:{documentId:{type:String,requerid:!0}},setup(t){const e=C(),{data:i,isError:u,isLoading:l}=V({queryKey:["document",t.documentId],queryFn:()=>R(t.documentId)}),{isPending:c,isSuccess:s,data:b,mutate:g}=B({mutationFn:T}),{values:A,defineField:r,errors:w,handleSubmit:y,resetForm:m,meta:D}=M({validationSchema:O}),[S,E]=r("description"),[$,U]=r("folio"),[q,F]=r("isActive"),I=y(async n=>{g(n)});return x(()=>{if(u.value&&!l.value){e.replace("/movimiento");return}}),p(i,()=>{i&&m({values:i.value})},{deep:!0,immediate:!0}),p(s,n=>{console.log("isUpdateSuccess"),n&&m({values:b.value})}),{values:A,errors:w,meta:D,isPending:c,description:S,descriptionAttrs:E,folio:$,folioAttrs:U,isActive:q,isActiveAttrs:F,onSubmit:I}}}),X={class:"flex items-center gap-4 mb-4"},Y={class:"flex items-center gap-4 mb-4"},Z={class:"flex items-center gap-4 mb-4"},_=["model"],ee={class:"flex justify-end gap-2"},te=["disabled"];function oe(t,e,i,u,l,c){return L(),H("div",null,[o("form",{onSubmit:e[3]||(e[3]=(...s)=>t.onSubmit&&t.onSubmit(...s))},[e[8]||(e[8]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Agrega la informacion",-1)),o("div",X,[e[4]||(e[4]=o("label",{for:"description",class:"font-semibold w-24"},"Nombre del Documento",-1)),a(o("input",v({"onUpdate:modelValue":e[0]||(e[0]=s=>t.description=s)},t.descriptionAttrs,{required:""}),null,16),[[f,t.description]])]),o("div",Y,[e[5]||(e[5]=o("label",{for:"folio",class:"font-semibold w-24"},"Folio",-1)),a(o("input",v({"onUpdate:modelValue":e[1]||(e[1]=s=>t.folio=s)},t.folioAttrs,{required:"",disabled:""}),null,16),[[f,t.folio]])]),o("div",Z,[e[7]||(e[7]=o("label",{for:"isActive",class:"font-semibold w-24"},"Estatus",-1)),a(o("select",{name:"isActive",id:"isActive","onUpdate:modelValue":e[2]||(e[2]=s=>t.isActive=s),model:t.isActive,required:""},e[6]||(e[6]=[o("option",{value:!0},"Activo",-1),o("option",{value:!1},"Inactivo",-1)]),8,_),[[K,t.isActive]])]),o("div",ee,[o("button",{type:"submit",disabled:t.isPending,class:"disabled:bg-gray-200 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,te)])],32)])}const ue=Q(W,[["render",oe]]);export{ue as default};
